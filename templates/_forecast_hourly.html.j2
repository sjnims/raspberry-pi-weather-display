{# ---------------------------------------------------------------------------
   Hour-by-hour forecast strip
   Context vars expected: hourly, units_temp, units_wind,
                         time_fmt, owm_icon (helper), hourly_precip (helper)
   --------------------------------------------------------------------------- #}

<table class="hourly">
  {# ─── header: local time of each hour ─── #}
  <tr>
    {% for h in hourly %}
      <th>{{ h.dt | strftime(time_fmt) }}</th>
    {% endfor %}
  </tr>

  {# ─── weather icon (take first condition) ─── #}
  <tr>
    {% for h in hourly %}
      <td><i class="wi {{ owm_icon(h.weather[0]) }}"></i></td>
    {% endfor %}
  </tr>

  {# ─── temperature ─── #}
  <tr>
    {% for h in hourly %}
      <td>{{ h.temp | round | int }}{{ units_temp }}</td>
    {% endfor %}
  </tr>

  {# ─── wind speed & direction ─── #}
  <tr>
    {% for h in hourly %}
      <td>
        {{ h.wind_speed | round(0) }} {{ units_wind }}<br>
        <i class="wi wi-wind-optimized tiny"
           style="transform: rotate({{ h.wind_deg }}deg);"></i>
      </td>
    {% endfor %}
  </tr>

  {# ─── precip (blank if none) ─── #}
  <tr>
    {% for h in hourly %}
      <td>{{ hourly_precip(h) }}</td>
    {% endfor %}
  </tr>
</table>